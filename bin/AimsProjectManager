#!/usr/bin/env ruby

require "rubygems"

require "wx"
require "erb"
require "gl"
require "glu"

require 'aims'
require 'aims_project'
require 'aims_project/material.rb'
require 'aims_project/atom.rb'
require 'aims_project/inspector.rb'
require 'aims_project/crystal_viewer.rb'
require 'aims_project/geometry_editor.rb'
require 'aims_project/project_tree.rb'
require 'aims_project/calculation_tree.rb'
require 'aims_project/app_controller.rb'

controller = AimsProject::AppController.new

unless __FILE__.nil?
  cwd = File.dirname(File.expand_path("."))
  controller.working_dir = cwd
end

controller.open_file(ARGV[0]) if ARGV[0]

project_obj_files = Dir["*.yaml"]
controller.project = AimsProject::Project.load(project_obj_files.first) unless project_obj_files.empty?

controller.main_loop